<!DOCTYPE html><head><style type="text/css">pre code{display:block;padding:.5em;color:black;background:#f8f8ff}pre .comment,pre .template_comment,pre .diff .header,pre .javadoc{color:#998;font-style:italic}pre .keyword,pre .css .rule .keyword,pre .winutils,pre .javascript .title,pre .lisp .title,pre .subst{color:black;font-weight:bold}pre .number,pre .hexcolor{color:#40a070}pre .string,pre .tag .value,pre .phpdoc,pre .tex .formula{color:#d14}pre .title,pre .id{color:#900;font-weight:bold}pre .javascript .title,pre .lisp .title,pre .subst{font-weight:normal}pre .class .title,pre .haskell .label,pre .tex .command{color:#458;font-weight:bold}pre .tag,pre .tag .title,pre .rules .property,pre .django .tag .keyword{color:navy;font-weight:normal}pre .attribute,pre .variable,pre .instancevar,pre .lisp .body{color:teal}pre .regexp{color:#009926}pre .class{color:#458;font-weight:bold}pre .symbol,pre .ruby .symbol .string,pre .ruby .symbol .keyword,pre .ruby .symbol .keymethods,pre .lisp .keyword,pre .tex .special,pre .input_number{color:#990073}pre .builtin,pre .built_in,pre .lisp .title{color:#0086b3}pre .preprocessor,pre .pi,pre .doctype,pre .shebang,pre .cdata{color:#999;font-weight:bold}pre .deletion{background:#fdd}pre .addition{background:#dfd}pre .diff .change{background:#0086b3}pre .chunk{color:#aaa}pre .tex .formula{opacity:.5}#docs {margin:auto}.block {clear:both}.comment {padding: 0 10px;width:50%;background:snow}.code {width:49%;background:#f8f8ff}td {vertical-align:top}table {width:90%; border-collapse:collapse}
</style></head><body><table id="docs"><tr class="block"><td class="comment"><h2>createWatch</h2>

<p>Set up watchers on project files to trigger rebuild when in continuous mode.</p></td><td class="code"><pre><code>createWatch = <span class="params">()</span> <span class="function">-></span>
  continuous = <span class="literal">false</span></code></pre></td></tr><tr class="block"><td class="comment"><p>onChange callback is <em>triggerProcess</em></p></td><td class="code"><pre><code>  onChange = triggerProcess
  divedir = <span class="params">(dir)</span> <span class="function">-></span>
    dive dir, { recursive: <span class="literal">false</span>, all: <span class="literal">false</span> }, <span class="params">( err, file )</span> <span class="function">-></span>
      <span class="keyword">unless</span> err
        fs.watch file, { persistent: <span class="literal">true</span> }, <span class="params">( c, p )</span> <span class="function">-></span>
          onEvent <span class="string">"Change in <span class="subst">#{file}</span> detected. Rebuilding..."</span>
          callback = onChange</code></pre></td></tr><tr class="block"><td class="comment"><p>Change <em>onChange</em> to a noop function to avoid infinite loopage</p></td><td class="code"><pre><code>          onChange = <span class="function">-></span> <span class="comment">#do nothing</span>
          callback<span class="params">()</span>
  divedir dir <span class="keyword">for</span> dir <span class="keyword">in</span> [config.source, config.spec, config.ext]
</code></pre></td></tr><tr class="block"><td class="comment"><h2>triggerProcess</h2>

<p>Unsets watchers and kicks off from the beginning</p></td><td class="code"><pre><code>triggerProcess = <span class="params">()</span> <span class="function">-></span></code></pre></td></tr><tr class="block"><td class="comment"><p>Walk down the source dir and unwatch the files</p></td><td class="code"><pre><code>  dive config.source, { recursive: <span class="literal">false</span>, all: <span class="literal">false</span> }, <span class="params">( err, file )</span> <span class="function">-></span>
    <span class="keyword">unless</span> err
      fs.unwatchFile file
</code></pre></td></tr><tr class="block"><td class="comment"><p>Re-generate Pavlov test page</p></td><td class="code"><pre><code>  createPage<span class="params">()</span>
</code></pre></td></tr><tr class="block"><td class="comment"><p>Re-start process</p></td><td class="code"><pre><code>  process<span class="params">()</span></code></pre></td></tr></table></body>